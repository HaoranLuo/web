# 🚀 快速开始指南

## 第一步：设置 Supabase（数据库）

### 1.1 创建 Supabase 项目
1. 访问 https://supabase.com
2. 注册/登录账号
3. 点击 "New Project"
4. 填写项目信息：
   - Project Name: `badminton-club`（或任意名称）
   - Database Password: 设置一个强密码（记住它！）
   - Region: 选择离你最近的区域
5. 点击 "Create new project"，等待创建完成（约 2 分钟）

### 1.2 执行数据库脚本
1. 在 Supabase Dashboard 中，点击左侧菜单的 **"SQL Editor"**
2. 点击 **"New query"**
3. 打开本地的 `database.sql` 文件，复制全部内容
4. 粘贴到 SQL Editor 中
5. 点击 **"Run"** 或按 `Ctrl+Enter`
6. 确认执行成功（应该看到 "Success. No rows returned"）

### 1.3 获取 API 密钥
1. 在 Supabase Dashboard 中，点击左侧菜单的 **"Settings"**（齿轮图标）
2. 点击 **"API"**
3. 复制以下三个值（稍后需要用到）：
   - **Project URL** → 这就是 `SUPABASE_URL`https://lvsbiojlpjvwygogxdyj.supabase.co
   - **anon public** key → 这就是 `SUPABASE_ANON_KEY`eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx2c2Jpb2pscGp2d3lnb2d4ZHlqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc4ODE1MDAsImV4cCI6MjA4MzQ1NzUwMH0.mCeefVBpmQvaca3KJjtWeKOryhtsFIvVT8L_o5zYb_g
   - **service_role** key → 这就是 `SUPABASE_SERVICE_ROLE_KEY`（⚠️ 这个要保密！）eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx2c2Jpb2pscGp2d3lnb2d4ZHlqIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2Nzg4MTUwMCwiZXhwIjoyMDgzNDU3NTAwfQ.5VQMzy4IjUoidQJ1M40TYuxYuhdNalojFUi5AQ4vJ-Y

---

## 第二步：部署到 Netlify

### 方法一：拖拽部署（最简单）⭐ 推荐

1. **访问 Netlify**
   - 打开 https://www.netlify.com
   - 注册/登录账号（可以用 GitHub 账号登录）

2. **部署网站**
   - 点击页面上的 **"Add new site"** 按钮
   - 选择 **"Deploy manually"**（手动部署）
   - 会看到一个拖拽区域

3. **准备部署文件**
   - 在文件管理器中，进入 `C:\Users\骆浩然\Desktop\cursoor`
   - **全选所有文件和文件夹**（包括 `netlify` 文件夹）
   - 压缩成一个 ZIP 文件（右键 → 发送到 → 压缩文件夹）

4. **上传部署**
   - 将 ZIP 文件拖拽到 Netlify 的部署区域
   - 等待上传和部署完成（约 1-2 分钟）

5. **获取网站地址**
   - 部署完成后，你会看到一个随机域名，例如：`amazing-site-123.netlify.app`
   - 点击这个链接可以访问你的网站https://695fe4fe61b3db7291b6140d--coruscating-frangollo-a38646.netlify.app/

### 方法二：通过 GitHub 部署（推荐用于长期维护）

1. **创建 GitHub 仓库**
   - 访问 https://github.com
   - 点击右上角 "+" → "New repository"
   - 填写仓库名称，例如：`badminton-club`
   - 选择 "Public" 或 "Private"
   - 点击 "Create repository"

2. **上传代码到 GitHub**
   - 在本地打开 PowerShell 或 Git Bash
   - 进入项目目录：
     ```bash
     cd "C:\Users\骆浩然\Desktop\cursoor"
     ```
   - 初始化 Git（如果还没有）：
     ```bash
     git init
     git add .
     git commit -m "Initial commit"
     ```
   - 连接远程仓库并推送：
     ```bash
     git remote add origin https://github.com/你的用户名/badminton-club.git
     git branch -M main
     git push -u origin main
     ```

3. **在 Netlify 中连接 GitHub**
   - 在 Netlify Dashboard 中，点击 "Add new site" → "Import an existing project"
   - 选择 "GitHub"
   - 授权 Netlify 访问你的 GitHub
   - 选择刚才创建的仓库
   - 点击 "Deploy site"

---

## 第三步：配置环境变量（重要！）

这是最关键的一步，没有配置环境变量，网站无法正常工作。

1. **进入 Netlify 站点设置**
   - 在 Netlify Dashboard 中，点击你的站点
   - 点击 **"Site settings"**（站点设置）

2. **添加环境变量**
   - 在左侧菜单中找到 **"Environment variables"**（环境变量）
   - 点击 **"Add a variable"**，依次添加以下三个变量：

   **变量 1：**
   - Key: `SUPABASE_URL`
   - Value: 粘贴你从 Supabase 复制的 Project URL
   - Scope: 选择 "All scopes"（所有作用域）

   **变量 2：**
   - Key: `SUPABASE_ANON_KEY`
   - Value: 粘贴你从 Supabase 复制的 anon public key
   - Scope: 选择 "All scopes"

   **变量 3：**
   - Key: `SUPABASE_SERVICE_ROLE_KEY`
   - Value: 粘贴你从 Supabase 复制的 service_role key
   - Scope: 选择 "All scopes"

3. **保存并重新部署**
   - 添加完所有变量后，点击 **"Save"**
   - 回到站点主页，点击 **"Trigger deploy"** → **"Clear cache and deploy site"**
   - 等待重新部署完成

---

## 第四步：添加测试数据

现在网站已经部署好了，但还没有活动数据，需要手动添加。

1. **进入 Supabase Dashboard**
   - 打开 https://app.supabase.com
   - 选择你的项目

2. **添加活动数据**
   - 点击左侧菜单的 **"Table Editor"**
   - 选择 **"events"** 表
   - 点击 **"Insert"** → **"Insert row"**
   - 填写：
     - `title`: `周五训练`
     - `description`: `每周五的常规训练活动`
     - `status`: `open`
   - 点击 "Save"，记住生成的 `id`（例如：1）

3. **添加活动分组**
   - 在 Table Editor 中选择 **"event_groups"** 表
   - 点击 **"Insert"** → **"Insert row"**
   - 填写：
     - `event_id`: `1`（刚才创建的活动 ID）
     - `name`: `新手场`
     - `capacity`: `7`
     - `claimed`: `0`
     - `checkin_img`: `https://via.placeholder.com/300?text=签到二维码`（临时图片，后续替换为真实二维码）
     - `share_link`: `https://example.com/ticket`（临时链接，后续替换为真实领票链接）
   - 点击 "Save"
   - 再添加一个分组：
     - `event_id`: `1`
     - `name`: `高手场`
     - `capacity`: `7`
     - 其他同上

4. **（可选）添加财务数据**
   - 在 **"finance_records"** 表中添加测试数据：
     - `type`: `income`
     - `amount`: `1000`
     - `description`: `会费收入`

---

## 第五步：测试网站

1. **访问你的网站**
   - 打开 Netlify 给你的网站地址
   - 例如：`https://amazing-site-123.netlify.app`

2. **测试功能**
   - ✅ 点击"登录/注册"按钮，注册一个新账号
   - ✅ 填写真实姓名、学号、学院
   - ✅ 登录后，查看活动列表
   - ✅ 点击"立即报名"按钮
   - ✅ 查看签到二维码 Modal
   - ✅ 点击"我已签到"
   - ✅ 查看领票链接

---

## 🎉 完成！

现在你的羽毛球社团管理平台已经上线了！

### 后续操作建议：

1. **替换真实数据**
   - 将测试的签到二维码和领票链接替换为真实链接
   - 添加更多活动和分组

2. **自定义域名**（可选）
   - 在 Netlify Site settings → Domain management 中添加自定义域名

3. **定期维护**
   - 在 Supabase 后台管理活动数据
   - 查看报名记录、财务流水等

---

## ❓ 遇到问题？

- **网站显示"系统配置错误"**
  → 检查环境变量是否都正确设置了

- **无法注册/登录**
  → 检查 Supabase 的 Authentication 设置

- **报名按钮没反应**
  → 打开浏览器控制台（F12）查看错误信息
  → 检查 Netlify Functions 日志

- **其他问题**
  → 查看 `SETUP.md` 文件中的"常见问题"部分
