# ⚡ 本地开发快速入门（5分钟上手）

本指南帮助您快速在本地启动项目，开始开发和测试。

---

## 🎯 一键启动

### Windows 用户

1. 双击运行 `start-dev.bat`
2. 等待自动安装和启动
3. 浏览器自动打开 `http://localhost:8888`

### Mac/Linux 用户

打开终端：

```bash
cd 第二版
./start-dev.sh
```

---

## 📝 首次运行（3步配置）

### 步骤 1：复制环境变量文件

```bash
cp .env.example .env
```

### 步骤 2：编辑 .env 文件

用文本编辑器打开 `.env`，填入你的 Supabase 配置：

```bash
SUPABASE_URL=https://你的项目ID.supabase.co
SUPABASE_ANON_KEY=你的公开密钥
SUPABASE_SERVICE_ROLE_KEY=你的私密密钥
```

**如何获取这些值：**
1. 登录 [Supabase Dashboard](https://supabase.com/dashboard)
2. 选择项目 > Settings > API
3. 复制 URL 和密钥

### 步骤 3：启动开发服务器

#### Windows：
```bash
start-dev.bat
```

#### Mac/Linux：
```bash
./start-dev.sh
```

---

## 🌐 访问你的网站

启动后，在浏览器访问：

- **主页：** http://localhost:8888/index.html
- **管理员后台：** http://localhost:8888/admin.html
- **测试 API：** http://localhost:8888/.netlify/functions/config

---

## 🔧 常用命令

### 启动开发服务器

```bash
netlify dev
```

### 停止服务器

按 `Ctrl + C`

### 安装依赖（首次运行或更新后）

```bash
npm install
```

---

## 💡 开发流程

```
1. 启动开发服务器 (netlify dev)
   ↓
2. 修改代码（HTML/CSS/JS）
   ↓
3. 保存文件
   ↓
4. 浏览器自动刷新 ⚡
   ↓
5. 查看效果和调试
   ↓
6. 重复 2-5 步
   ↓
7. 测试完成后提交代码
```

---

## 🐛 调试技巧

### 查看前端日志

1. 按 `F12` 打开开发者工具
2. 切换到 "Console" 标签
3. 查看 console.log 输出

### 查看 API 日志

API 日志会直接显示在终端（运行 `netlify dev` 的窗口）

**示例：**
```
◈ Request from ::1: POST /.netlify/functions/register
◈ Response with status 200 in 123ms
```

---

## 📂 重要文件

| 文件 | 用途 | 是否提交到 Git |
|------|------|----------------|
| `.env` | 环境变量（包含密钥） | ❌ 不提交 |
| `.env.example` | 环境变量模板 | ✅ 提交 |
| `.gitignore` | Git 忽略规则 | ✅ 提交 |
| `netlify.toml` | Netlify 配置 | ✅ 提交 |
| `package.json` | 项目依赖 | ✅ 提交 |

---

## 🚀 部署到生产

### 当本地测试完成后：

```bash
# 1. 提交代码
git add .
git commit -m "完成新功能开发"

# 2. 推送到 GitHub
git push

# 3. Netlify 自动部署（1-2分钟）
```

---

## ⚠️ 注意事项

### 1. 保护敏感信息

- ✅ `.env` 文件已在 `.gitignore` 中排除
- ❌ 永远不要把 `.env` 提交到 Git
- ❌ 不要在代码中硬编码密钥

### 2. 数据库操作

- ⚠️ 本地和生产使用同一个数据库
- 💡 测试时使用测试数据
- 💡 或创建单独的开发数据库

### 3. 端口占用

- 默认端口：8888
- 如被占用，会自动使用其他端口
- 或在 `netlify.toml` 中修改

---

## 📚 更多文档

- **详细教程：** `本地开发指南.md`
- **环境切换：** `本地与生产环境切换.md`
- **部署指南：** `部署检查清单.md`
- **代码检查：** `代码检查报告.md`

---

## 🆘 遇到问题？

### 常见问题

**Q: 提示"端口被占用"？**
A: 关闭占用端口的程序，或修改 `netlify.toml` 使用其他端口

**Q: API 返回 500 错误？**
A:
1. 检查 `.env` 文件是否正确
2. 查看终端的错误日志
3. 确认 Supabase 配置正确

**Q: 修改代码后未生效？**
A:
1. 确认文件已保存
2. 刷新浏览器（Ctrl+F5）
3. 重启开发服务器

**Q: npm install 失败？**
A:
1. 检查 Node.js 版本（需要 v18+）
2. 尝试删除 `node_modules` 后重新安装
3. 检查网络连接

---

## 🎉 开始开发！

现在你已经准备好开始本地开发了！

**快速命令：**

```bash
# Windows
start-dev.bat

# Mac/Linux
./start-dev.sh
```

**访问：** http://localhost:8888

祝开发顺利！🚀

---

## 💻 系统要求

- **Node.js**: v18 或更高
- **npm**: 包含在 Node.js 中
- **操作系统**: Windows 10/11, macOS 10.14+, 或 Linux
- **浏览器**: Chrome, Firefox, Safari, Edge（最新版本）
- **磁盘空间**: 至少 500MB（用于 node_modules）
